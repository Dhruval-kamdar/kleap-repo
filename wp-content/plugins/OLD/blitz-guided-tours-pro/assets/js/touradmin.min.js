function bztsw_selectTarget(){jQuery("#bztsw_add_step input[name=bztsw_pageurl]").length>0&&jQuery("#bztsw_add_step input[name=bztsw_pageurl]").val().length>3&&(jQuery("#bztsw_add_step input[name=bztsw_pageurl]").val().indexOf("http")<0?frontpageurl+=jQuery("#bztsw_add_step input[name=bztsw_pageurl]").val():frontpageurl=jQuery("#bztsw_add_step input[name=bztsw_pageurl]").val()),jQuery("#bztsw_add_tour input[name=bztsw_pageurl]").length>0&&jQuery("#bztsw_add_tour input[name=bztsw_pageurl]").val().length>3&&(jQuery("#bztsw_add_tour input[name=bztsw_pageurl]").val().indexOf("http")<0?frontpageurl+=jQuery("#bztsw_add_tour input[name=bztsw_pageurl]").val():frontpageurl=jQuery("#bztsw_add_tour input[name=bztsw_pageurl]").val()),"1"==jQuery("#bztsw_onDashboard").val()&&(frontpageurl=dashboardurl),$frame=jQuery('<iframe id="bztsw_selectIframe" src="'+frontpageurl+'"></iframe>'),jQuery("body").append($frame),$panel=jQuery('<div id="bztsw_componentPanel"></div>'),jQuery("body").append($panel),$panel.html("Loading ..."),jQuery("#bztsw_selectIframe").load(function(){bztsw_dilogSelectorText()})}var bztsw_modeSelection=!1;function bztsw_choosenElement(){jQuery("#bztsw_selectIframe").get(0).contentWindow.bztsw_buildModeofSelection(!0),$panel=jQuery("#bztsw_componentPanel"),$panel.html("<p>Select Component</p>")}function bztsw_stepSelected(e){$panel=jQuery("#bztsw_componentPanel"),$panel.html("<h3>Component selected</h3>");var t=getUrl(e);$panel.append("<p>Is it the one you Selected ?</p>"),$panel.append('<p><a href="javascript:" class="button-primary" onclick="bztsw_finalizeSelectedComponent(\''+t+'\');">Yes</a><a href="javascript:" class="button-secondary" onclick="bztsw_choosenElement();">No</a></p>')}function identifyComponent(e){return jQuery(e).attr("id")?jQuery(e).attr("id"):getUrl(e)}function getUrl(e){var t="";return jQuery(e).length>0&&void 0!==jQuery(e).prop("tagName")&&(jQuery(e).attr("id")&&"ultimate-"!=jQuery(e).attr("id").substr(0,9)?t+="#"+jQuery(e).attr("id"):(t=">"+jQuery(e).prop("tagName")+":nth-child("+(jQuery(e).index()+1)+")"+t,t=getUrl(jQuery(e).parent())+t)),t}function bztsw_dilogSelectorText(){$panel=jQuery("#bztsw_componentPanel"),$panel.html("<h3>Select a static Component</h3>"),$panel.append('<p><a href="javascript:" class="button-primary" onclick="bztsw_choosenElement();">Choose</a></p>')}function bztsw_finalizeSelectedComponent(e){var t=jQuery("#bztsw_selectIframe").get(0).contentWindow.document.location.href;"//"==t.substr(t.length-2,2)&&(t=t.substr(0,t.length-1)),jQuery("input[name=bztsw_pageurl]").val(t),jQuery("#bztsw_domComponent").val(e),jQuery("#bztsw_domComponent").parent().children("span").html("Element selected"),jQuery("#bztsw_selectIframe,#bztsw_componentPanel").remove()}
