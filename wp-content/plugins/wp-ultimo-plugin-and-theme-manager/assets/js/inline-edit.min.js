var wuExtentionEditor;function renderMediaUploader(t){"use strict";var e,i;void 0===e&&(e=wp.media.frames.file_frame=wp.media({title:"Upload Image",button:{text:"Select Image"},multiple:!1})).on("select",function(){i=e.state().get("selection").first().toJSON(),jQuery("."+t+"-preview").attr("src",i.url),jQuery("."+t).attr("value",i.id)}),e.open()}window.wp=window.wp||{},function(o,d){wuExtentionEditor={init:function(){var t=this,e=o("#inline-edit");t.type="plugins",t.what="#"+t.type+"-",o("#the-list").on("click","a.editinline",function(){return wuExtentionEditor.edit(this),!1}),e.keyup(function(t){if(27===t.which)return wuExtentionEditor.revert()}),o(".cancel",e).click(function(){return wuExtentionEditor.revert()}),o(".save",e).click(function(){return wuExtentionEditor.save(this)}),o("input, select",e).keydown(function(t){if(13===t.which)return wuExtentionEditor.save(this)}),o('#posts-filter input[type="submit"]').mousedown(function(){t.revert()})},edit:function(n){var r,t=this;t.revert(),"object"==typeof n&&(n=t.getId(n)),t.file=o('tr[data-slug="'+n+'"]').data("plugin"),r=o("#inline-edit").clone(!0),o("#inline_"+n),o("td",r).attr("colspan",o("th:visible, td:visible",".wp-list-table.widefat:first thead").length),o('tr[data-slug="'+n+'"]').hide().after(r).after('<tr class="hidden"></tr>');return o.each(["title","author","description","display_author","display_version","display_details","display_other","wu_extension_category_theme","wu_extension_category_plugin","extension_thumbnail-preview","extension_thumbnail"],function(t,e){if(value=o('[name="field_'+e+'"]',o('tr[data-slug="'+n+'"]')).val(),"extension_thumbnail-preview"===e)return o(".extension_thumbnail-preview").attr("src",value),!0;var i=o('[name="'+e+'"]',r);"checkbox"===i.attr("type")?1==value?i[0].checked=!0:i[0].checked=!1:i.val(value)}),o(r).attr("id",n).addClass("inline-editor").show(),o(".ptitle",r).eq(0).focus(),!1},save:function(a){var t;o('input[name="taxonomy"]').val();return"object"==typeof a&&(a=this.getId(a)),o("table.widefat .spinner").addClass("is-active"),t={action:"wu_save_extension",extension_id:a,extension_file:this.file},t=o("#"+a).find(":input").serialize()+"&"+o.param(t),o.post(ajaxurl,t,function(t){var e,i,n,r=o("#"+a+" .inline-edit-save .error");o("table.widefat .spinner").removeClass("is-active"),t?-1!==t.indexOf("<tr")?(o('tr[data-slug="'+a+'"]').siblings("tr.hidden").addBack().remove(),i=o(t).attr("id"),o("#"+a).before(t).remove(),e=i?(n=i.replace(wuExtentionEditor.type+"-",""),o("#"+i)):(n=a,o(wuExtentionEditor.what+a)),o("#parent").find("option[value="+n+"]").text(e.find(".row-title").text()),e.hide().fadeIn(400,function(){e.find(".editinline").focus(),d.a11y.speak(inlineEditL10n.saved)})):(r.html(t).show(),d.a11y.speak(r.text())):(r.html(inlineEditL10n.error).show(),d.a11y.speak(inlineEditL10n.error))}),!1},revert:function(){var t=o("table.widefat tr.inline-editor").attr("id");t&&(o("table.widefat .spinner").removeClass("is-active"),o("#"+t).siblings("tr.hidden").addBack().remove(),o('tr[data-slug="'+t+'"]').show().find(".editinline").focus())},getId:function(t){return o(t).parents("tr").data("slug")?o(t).parents("tr").data("slug"):o(t).parents("tr").attr("id")}},o(document).ready(function(){wuExtentionEditor.init()})}(jQuery,window.wp),jQuery(".wu-field-button-upload").on("click",function(t){t.preventDefault(),renderMediaUploader(jQuery(this).data("target"))}),jQuery(".wu-field-button-upload-remove").on("click",function(t){t.preventDefault();var e=jQuery(this).data("target");jQuery("."+e+"-preview").removeAttr("src"),jQuery("."+e).attr("value","")});
//# sourceMappingURL=inline-edit.min.js.map